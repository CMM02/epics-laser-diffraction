record(ai,"Diode:rdCur") {
	field(DESC,"Current from photodiode")
	field(DTYP,"stream")
	#field(EGU,"A")
	#field(SCAN, ".5 second")
	field(INP,"@diode-ioc.proto rdCur KEYSIGHT")
	field(PREC, 10)
}

record(stringin, "Diode:rdIDN") {
	field(DESC, "IDN of the instrument")
	field(DTYP, "stream")
	field(INP, "@diode-ioc.proto rdIDN KEYSIGHT")
	field(SCAN, "Passive")
	field(PINI, "YES")
}


record(ai, "Diode:rdCRng") {
	field(DESC, "Read Current measurement range")
	field(DTYP, "stream")
	field(INP, "@diode-ioc.proto rdCRng KEYSIGHT")
	field(SCAN, "1 second")
	field(PINI, "YES")
}


record(ao, "Diode:setCRng") {
	field(DESC, "Set the current range")
	field(DTYP, "stream")
	field(OUT, "@diode-ioc.proto setCRng KEYSIGHT")
	field(VAL, 2e-6)
	field(PINI, "YES")
}

#record(stringin, "Diode:getOperate") {
#	field(DESC, "Ask if Ammeter On or OFF")
#	field(INP, "@diode-ioc.proto getOperate KEYSIGHT")
#	field(DTYP, "stream")
#	field(PINI, "YES")
#	field(SCAN, "1 second")
#}


#record(stringout, "Diode:setOperate") {
#	field(DESC, "Set Ammeter Operate")
#	field(OUT, "@diode-ioc.proto setOperate KEYSIGHT")
#	field(DTYP, "stream")
#}


record(bi, "Diode:getOperate") {
	field(DESC, "Get Ammeter Operation state")
	field(INP, "@diode-ioc.proto getOperate KEYSIGHT")
	field(DTYP, "stream")
	field(ZNAM, "OFF")
	field(ONAM, "ON")
	field(SCAN, "1 second")
}


record(bo, "Diode:setOperate") {
	field(DESC, "Set Ammeter Operate")
	field(OUT, "@diode-ioc.proto setOperate KEYSIGHT")
	field(DTYP, "stream")
	field(ZNAM, "OFF")
	field(ONAM, "ON")
}

record(bi, "Diode:readTrigger") {
	field(DESC, "Trigger to read current")
	field(SCAN, "1 second")
	field(FLNK, "Diode:rdCur")
	field(DISV, "0")
	field(SDIS, "Diode:triggerSwitch")
}

record(bi, "Diode:triggerSwitch") {
	field(DESC, "Switch triggering of read current")
	field(VAL,  "1")
}
